<Application x:Class="FreeDiscussions.Client.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:FreeDiscussions.Client"
             xmlns:dragablz="clr-namespace:Dragablz;assembly=Dragablz"
             xmlns:models="clr-namespace:FreeDiscussions.Client.Models"
             xmlns:svg1="clr-namespace:SVGImage.SVG;assembly=DotNetProjects.SVGImage"
             StartupUri="UI/MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <!-- tell Dragablz tab control to use the Material Design theme -->
            <Style TargetType="{x:Type dragablz:TabablzControl}" BasedOn="{StaticResource MaterialDesignTabablzControlStyle}" />


            <Style TargetType="{x:Type Thumb}" x:Key="InvisibleThumbStyle">
                <Setter Property="Background" Value="Transparent" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Background="{TemplateBinding Background}" />
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <DataTemplate x:Key="TabItemTemplate" DataType="{x:Type models:TabItemModel}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="22"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                    </Grid.ColumnDefinitions>
                    <svg1:SVGImage Source="{Binding HeaderImage}" Height="18" Width="18" Margin="0 3"/>
                    <TextBlock HorizontalAlignment="Center" Grid.Column="1" Margin="0 3" Text="{Binding HeaderText}"/>
                    <Thumb Style="{DynamicResource InvisibleThumbStyle}"  dragablz:DragablzItem.IsCustomThumb="True" Grid.Column="0" Grid.ColumnSpan="2"/>

                    <Button Style="{StaticResource TopButtonStyle}" Tag="{Binding Id}" Grid.Column="2" BorderThickness="0" Name="CloseButton" Command="{Binding Close}">
                        <Button.Background>
                            <SolidColorBrush Color="{StaticResource SecondaryBackground}"/>
                        </Button.Background>
                        <Button.Content>
                            <TextBlock FontSize="22" Margin="0 -16" Text="×">
                                <TextBlock.Foreground>
                                    <SolidColorBrush Color="{StaticResource SecondaryText}"/>
                                </TextBlock.Foreground>
                            </TextBlock>
                        </Button.Content>
                    </Button>
                </Grid>
            </DataTemplate>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary>
                    <ResourceDictionary.MergedDictionaries>
                        <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/MaterialDesignColor.LightBlue.xaml" />
                    </ResourceDictionary.MergedDictionaries>


                    <Color x:Key="PrimaryBackground" >#FAFAFA</Color>
                    <Color x:Key="SecondaryBackground">#EBEBEB</Color>
                    <Color x:Key="PrimaryText">#0098DD</Color>
                    <Color x:Key="SecondaryText">#383A42</Color>

                    <Style TargetType="{x:Type Button}" x:Key="TopButtonStyle">
                        <Setter Property="Foreground" Value="#0CA5E9" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Border x:Name="Border" Background="{TemplateBinding Background}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#0098DD" TargetName="Border" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ResourceDictionary>

                <ResourceDictionary>
                    <!-- include a single secondary accent color (and the associated forecolour) -->
                    <SolidColorBrush x:Key="SecondaryAccentBrush" Color="{StaticResource Primary100}"/>
                    <SolidColorBrush x:Key="SecondaryAccentForegroundBrush" Color="{StaticResource Primary100}"/>
                </ResourceDictionary>

                <!-- Include the Dragablz Material Design style -->
                <ResourceDictionary Source="pack://application:,,,/Dragablz;component/Themes/materialdesign.xaml"/>

            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application>
